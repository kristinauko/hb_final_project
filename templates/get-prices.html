<!DOCTYPE html>
<html>
    <head>
        <title>Price data</title>
          <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    </head>
    <body>
        <h1>{{ name }}</h1>
            <div class='product-div'>
                <h3 id=amazon_id >{{ amazon_id }}</h3>

                <div id='priceDate' style='width:800px;height:400px;''>

                <script>
                    let amazon_id = $('#amazon_id').html();

                    $.get('/get-prices.json', {amazon_id: amazon_id}, (results) => {
                        console.log(results);
                        console.log(results.date);
                        console.log(results.price);

                        let date_time_list = results.date;
                        let price_list = results.price;

                        let plot = { 
                          x: date_time_list,
                          y: price_list,
                          mode: 'markers',
                          type: 'scatter'
                        };

                        let data = [plot];

                        Plotly.newPlot('priceDate', data);

                        $('#min_price').text('Lowest Price: ' + results.min_price);

                    });

                </script>

                </div>
                <h3 id="min_price"></h3>
            </div>
    </body>
